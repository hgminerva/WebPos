
@{
    ViewBag.Title = "Sales";
}
<style>
    .btns-wrapper {
        display: block;
        position: absolute;
        top: 45px;
        left: 0px;
        width: 100%;
        text-align: center;
    }

    .btns {
        display: block;
        position: relative;
    }
   .btn-content{
      display: block;
      position: relative;
      padding: 48px;
        }
   table{
       margin:0 auto;
   }
   td{
    padding:15px;
    border: 2px solid #fff;
   }
   td > a{
       color:#fff;
       text-decoration:none;
   }
   .tdbg td:hover{
       background-color:#d99694;
       color:#fff;

   }
   .salesInv{
        background-color:transparent;
        border:none;
   }
</style>
<!-- ADD THE CLASS sidedar-collapse TO HIDE THE SIDEBAR PRIOR TO LOADING THE SITE -->
<body class="hold-transition skin-blue sidebar-collapse sidebar-mini">
    <!-- Site wrapper -->
    <div class="wrapper" style="position:relative">

        <!-- ===================Main Header============================ -->
        @Html.Partial("_MainHeader")
        <!-- ===================Main Sidebar============================ -->
        @Html.Partial("_MainSidebar")
        <!-- =============================================== -->
        <div class="content-wrapper">
            <!-- Content Header (Page header) -->
            <div class="content-header btn-content">
                <div class="row">
                    <div class="col-md-12">
                        <div class="box box-primary" style="background-color:rgba(60,141,188,.6); margin-top:50px;">
                            <div class="box-body">
                                <p class="pull-right" style="color:#ffffff;font-size:6em;"> &#8369; 0.00</p>
                                <div class="form-group pull-left ">
                                    <label for="invoiceNo" class="col-sm-5 control-label">Invoice No</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control salesInv" id="invoiceNo" value="0001-002324">
                                    </div><br />
                                    <label for="invoiceDate" class="col-sm-5 control-label">Invoice Date</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control salesInv" id="invoiceDate" value="02/01/2016">
                                    </div><br />
                                    <label for="customer" class="col-sm-5 control-label">Customer</label>
                                    <div class="col-sm-6">
                                        <input type="text" class="form-control salesInv" id="customer" value="0001-002324">
                                    </div>
                                </div>
                            </div>
                        </div><!-- /.box -->
                    </div>
                    <div class="col-md-12">
                        <div class="input-group">
                            <div class="input-group-btn">
                                <button type="button" class="btn btn-primary"><i class='fa fa-barcode'></i>F11 BARCODE</button>
                            </div><!-- /btn-group -->
                            <input type="text" class="form-control">
                            <span class="input-group-btn">
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="modal" onclick='initTableSalesList()' data-target="#itemSearch"><i class='fa fa-search'></i>F1 SEARCH</button>
                                <button type="button" class="btn btn-primary"><i class='fa fa-download'></i> DOWNLOAD</button>
                            </span>
                        </div><!-- /input-group -->
                    </div>
                </div>
                <!--Modal Search-->
                <div class="modal " id="itemSearch" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-shopping-basket"></i>Sales Item Search</h4>
                            </div>

                            <div class="modal-body">
                                <div class="box-tools">
                                    <div class="input-group">
                                        <input type="text" class="form-control input-sm" id="InputFilter" placeholder="Search">
                                        <div class="input-group-btn">
                                            <button class="btn btn-sm btn-default"><i class="fa fa-search"></i></button>
                                        </div>
                                    </div>
                                </div>
                                <table id="periodCollectionGrid" class="grid border-custom"></table>
                                <div class="btn-group pull-right" id="navigationPageGrid">
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToFirstPageGrid">
                                        <span class="glyphicon glyphicon-fast-backward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToPreviousPageGrid">
                                        <span class="glyphicon glyphicon-step-backward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" disabled style="width: 100px" id="btnCurrentPageGrid"></button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToNextPageGrid">
                                        <span class="glyphicon glyphicon-step-forward"></span>
                                    </button>
                                    <button type="button" class="btn btn-default border-custom" id="btnMoveToLastPageGrid">
                                        <span class="glyphicon glyphicon-fast-forward"></span>
                                    </button>
                                </div>
                            </div>
                            <div class="modal-footer">
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!--another modal-->
                <!--Modal Sales New Item-->
                <div class="modal " id="pickItem" tabindex="-1" role="dialog" aria-hidden="true">

                    <div class="modal-dialog modal-primary modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-shopping-basket"></i>Sales Item - New</h4>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="col-sm-12">
                                        <input type='text' ... list='listid' class="form-control ">
                                        <datalist id='listid'>
                                            <option label='label1' value='value1'></option>
                                            <option label='label2' value='value2'></option>
                                            ...
                                        </datalist>
                                        <div class="row margin">
                                            <div class="col-md-6 ">
                                                <label for="quantity" class="col-sm-4 control-label">Quantity</label>
                                                <div class="col-sm-8">
                                                    <input type="text" class="form-control" id="quantity" placeholder="">
                                                </div>
                                                <label for="unit" class="col-sm-4 control-label">Unit</label>
                                                <div class="col-sm-8">
                                                    <input type='text' ... list='listid' class="form-control">
                                                    <datalist id='listid'>
                                                        <option label='label1' value='value1'></option>
                                                        <option label='label2' value='value2'></option>
                                                        ...
                                                    </datalist>
                                                </div>
                                                <label for="price" class="col-sm-4 control-label">Price</label>
                                                <div class="col-sm-8">
                                                    <input type='text' class="form-control">
                                                </div>
                                                <label for="discount" class="col-sm-4 control-label">Discount</label>
                                                <div class="col-sm-8">
                                                    <input type='text' ... list='listid' class="form-control">
                                                    <datalist id='listid'>
                                                        <option label='label1' value='value1'></option>
                                                        <option label='label2' value='value2'></option>
                                                        ...
                                                    </datalist>
                                                </div>
                                                <label for="discountRate" class="col-sm-5 control-label">Discount Rate(%)</label>
                                                <div class="col-sm-7">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                                <label for="discountAmount" class="col-sm-5 control-label">Discount Amount</label>
                                                <div class="col-sm-7">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                                <label for="netPrice" class="col-sm-4 control-label">Net Price</label>
                                                <div class="col-sm-8">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                                <label for="Amount" class="col-sm-4 control-label">Amount</label>
                                                <div class="col-sm-8">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                                <label for="vat" class="col-sm-4 control-label">VAT</label>
                                                <div class="col-sm-8">
                                                    <input type='text' ... list='listid' class="form-control">
                                                    <datalist id='listid'>
                                                        <option label='label1' value='value1'></option>
                                                        <option label='label2' value='value2'></option>
                                                        ...
                                                    </datalist>
                                                </div>
                                                <label for="vatRate" class="col-sm-4 control-label">VAT Rate</label>
                                                <div class="col-sm-8">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                                <label for="vatAmount" class="col-sm-4 control-label">VAT Amount</label>
                                                <div class="col-sm-8">
                                                    <input type='text' class="form-control" placeholder="0.00">
                                                </div>
                                            </div>
                                            <div class=" col-md-6">
                                                <label for="amount" class="col-sm-12 control-label">Remarks</label>
                                                <div class="col-sm-12">
                                                    <input type='text' class="form-control" style="height:350px;">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline"><i class="fa fa-check-square-o"></i>Enter ok</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!--Modal Sales Invoice Charge-->
                <div class="modal modal-primary" id="invoiceCharge" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <h4 class="modal-title"><i class="fa fa-shopping-basket"></i>Sales Invoice Charge</h4>
                            </div>

                            <div class="modal-body">
                                <div class="row">
                                    <div class="form-group">
                                        <div class="col-sm-12">
                                            <input type='text' class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="customer" class="col-sm-4 control-label">Customer</label>
                                        <div class="col-sm-8">
                                            <input type='text' ... list='listid' class="form-control">
                                            <datalist id='listid'>
                                                <option label='label1' value='value1'></option>
                                                <option label='label2' value='value2'></option>
                                                ...
                                            </datalist>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="rewardAvailable" class="col-sm-4 control-label">Reward Available</label>
                                        <div class="col-sm-8">
                                            <input type='text' class="form-control" placeholder="0.00">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="terms" class="col-sm-4 control-label">Terms</label>
                                        <div class="col-sm-8">
                                            <input type='text' ... list='listid' class="form-control">
                                            <datalist id='listid'>
                                                <option label='label1' value='value1'></option>
                                                <option label='label2' value='value2'></option>
                                                ...
                                            </datalist>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="rewardAvailable" class="col-sm-4 control-label">Remarks</label>
                                        <div class="col-sm-8">
                                            <input type='text' class="form-control" placeholder="0.00">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="salesAgent" class="col-sm-4 control-label">Sales/Agent</label>
                                        <div class="col-sm-8">
                                            <input type='text' ... list='listid' class="form-control">
                                            <datalist id='listid'>
                                                <option label='label1' value='value1'></option>
                                                <option label='label2' value='value2'></option>
                                                ...
                                            </datalist>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline"><i class="fa fa-check-square">F2 &nbsp;</i><strong>OK</strong></button>
                                <button type="button" class="btn btn-outline pull-left " data-dismiss="modal" aria-label="Close"><i class="fa fa-ban">&nbsp;</i>Cancel</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!--Modal Sales Invoice Discount-->
                <div class="modal modal-primary" id="salesInvoiceDiscount" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="row">
                                    <div class="col-xs-6 col-md-8">
                                        <h4 class="modal-title"><i class="fa fa-shopping-basket"></i>Sales Invoice Discount</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="form-group">
                                        <label for="customer" class="col-sm-4 control-label">Discount</label>
                                        <div class="col-sm-8">
                                            <input type='text' ... list='listid' class="form-control">
                                            <datalist id='listid'>
                                                <option label='label1' value='value1'></option>
                                                <option label='label2' value='value2'></option>
                                                ...
                                            </datalist>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="customer" class="col-sm-4 control-label">Item</label>
                                        <div class="col-sm-8">
                                            <input type='text' ... list='listid' class="form-control">
                                            <datalist id='listid'>
                                                <option label='label1' value='value1'></option>
                                                <option label='label2' value='value2'></option>
                                                ...
                                            </datalist>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline"><i class="fa fa-check-square">F7 &nbsp;</i><strong>OK</strong></button>
                                <button type="button" class="btn btn-outline pull-left " data-dismiss="modal" aria-label="Close"><i class="fa fa-ban">&nbsp;</i>Cancel</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!--Modal Override-->
                <div class="modal modal-primary" id="override" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="row">
                                    <div class="col-xs-6 col-md-8">
                                        <h4 class="modal-title"><i class="fa fa-shield"></i>Override</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <div class="row">
                                    <div class="form-group">
                                        <label for="username" class="col-sm-4 control-label">Username</label>
                                        <button type="button" class="btn btn-outline" data-toggle="modal" data-target="#keypad"><i class="fa fa-calculator"></i></button>
                                        <div class="col-sm-4">
                                            <input type='text' class="form-control">
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label for="password" class="col-sm-4 control-label">Password</label>
                                        <button type="button" class="btn btn-outline" data-toggle="modal" data-target="#keypad"><i class="fa fa-calculator"></i></button>
                                        <div class="col-sm-4">
                                            <input type='password' class="form-control">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-outline"><i class="fa fa-key"></i>Login</button>
                                <button type="button" class="btn btn-outline pull-left " data-dismiss="modal" aria-label="Close"><i class="fa fa-ban">&nbsp;</i>Cancel</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                </div><!-- /.modal -->
                <!--Modal KeyPad-->
                <div class="modal modal-primary" id="keypad" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                <div class="row">
                                    <div class="col-xs-6 col-md-8">
                                        <h4 class="modal-title"><i class="fa fa-calculator"></i>Keypad</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body">
                                <div class="form-group">
                                    <div class="col-sm-12">
                                        <input type='text' class="form-control margin"style="background-color:transparent;border:none;color:#fff;">
                                    </div>
                                </div>
                                <table>
                                    <tbody class="table">
                                    <tr class="tdbg">
                                        <td><a href="#">1</a></td>
                                        <td><a href="#">2</a></td>
                                        <td><a href="#">3</a></td>
                                        <td><a href="#">4</a></td>
                                        <td><a href="#">5</a></td>
                                        <td><a href="#">6</a></td>
                                        <td><a href="#">7</a></td>
                                        <td><a href="#">8</a></td>
                                        <td><a href="#">9</a></td>
                                        <td><a href="#">0</a></td>
                                        <td><a href="#">></a></td>
                                    </tr>
                                        <tr class="tdbg">
                                            <td><a href="#">Q</a></td>
                                            <td><a href="#">W</a></td>
                                            <td><a href="#">E</a></td>
                                            <td><a href="#">R</a></td>
                                            <td><a href="#">T</a></td>
                                            <td><a href="#">Y</a></td>
                                            <td><a href="#">U</a></td>
                                            <td><a href="#">I</a></td>
                                            <td><a href="#">O</a></td>
                                            <td><a href="#">P</a></td>
                                            <td><a href="#">,</a></td>
                                        </tr>
                                        <tr class="tdbg">
                                            <td><a href="#">A</a></td>
                                            <td><a href="#">S</a></td>
                                            <td><a href="#">D</a></td>
                                            <td><a href="#">F</a></td>
                                            <td><a href="#">G</a></td>
                                            <td><a href="#">H</a></td>
                                            <td><a href="#">J</a></td>
                                            <td><a href="#">K</a></td>
                                            <td><a href="#">L</a></td>
                                            <td><a href="#">.</a></td>
                                            <td><a href="#">-</a></td>
                                        </tr>
                                        <tr class="tdbg">
                                            <td><a href="#">lower<br>case</a></td>
                                            <td><a href="#">/</a></td>
                                            <td><a href="#">Z</a></td>
                                            <td><a href="#">X</a></td>
                                            <td><a href="#">C</a></td>
                                            <td><a href="#">V</a></td>
                                            <td><a href="#">B</a></td>
                                            <td><a href="#">N</a></td>
                                            <td><a href="#">M</a></td>
                                            <td colspan="2" rowspan="2" style=" text-align: center; vertical-align: middle;"><a href=" #"><i class="fa fa-check-square-o">ENTER</i></a></td>
                                        </tr>
                                        <tr class="tdbg">
                                            <td colspan="2" style=" text-align: center; vertical-align: middle;"><a href=" #">DEL</a></td>
                                            <td colspan="7" style=" text-align: center; vertical-align: middle;"><a href=" #">SPACE</a></td>
                                        </tr>
                                  <tbody>
                                </table>
                            </div>
                            <div class="modal-footer">
                            </div>
                            </div><!-- /.modal-content -->
                        </div><!-- /.modal-dialog -->
                    </div><!-- /.modal -->
                    <!--  <div class="modal fade" id="loadingModal" tabindex="-1" role="dialog" aria-labelledby="Loading..." aria-hidden="true" data-backdrop="static" data-keyboard="false">
            <div class=" modal-dialog modal-sm">
                Modal content
                <div class="modal-content">
                    <div class="modal-body">
                        <h4 style="text-align:center">Loading ...</h4>
                    </div>
                    <div class="modal-footer">
                        <img class="img-thumbnail img-responsive center-block img-custom" src='~/images/loading/progress_bar.gif'>
                    </div>
                </div>
            </div>
        </div>-->

                    <div class="box-body table-responsive no-padding">
                        <table class="table table-bordered">
                            <tr style="width:100%;background-color:#42A5F5; color:#fff;">
                                <th rowspan="2" style="width:25%; text-align:center; vertical-align:middle;">Item</th>
                                <th rowspan="2">Unit</th>
                                <th rowspan="2">Price</th>
                                <th colspan="2" style=" text-align: center; vertical-align: middle;">Discount</th>
                                <th rowspan="2">Net Price</th>
                                <th rowspan="2">Quantity</th>
                                <th rowspan="2">Net Amount</th>
                                <th colspan="2" style=" text-align: center; vertical-align: middle;">Vat</th>
                            </tr>
                            <tr style="background-color:#42A5F5; color:#fff;">
                                <td>Rate(%)</td>
                                <td>Amount</td>
                                <td>Rate(%)</td>
                                <td>Amount</td>
                            </tr>
                        </table>
                    </div><!-- /.box-body -->

                </div>
                                <section class="content-header btns-wrapper" id="">
                                    <section class="content-header pull-left" style="margin-left:20px;">
                                        <h1 class="fa fa-shopping-basket">
                                            Sales Detail
                                        </h1>
                                    </section>
                                    <div class="btn-group-horizontal pull-right btns" id="">
                                        <a class="btn btn-app" data-toggle="modal" data-target="#invoiceCharge">
                                            <i class="fa fa-lock"></i><strong>F2</strong> Lock
                                        </a>
                                        <a class="btn btn-app">
                                            <i class="fa fa-unlock"></i><strong>F3</strong> UnLock
                                        </a>
                                        <a class="btn btn-app">
                                            <i class="fa fa-eye"></i><strong>F4</strong> Preview
                                        </a>
                                        <a class="btn  btn-app">
                                            <i class="fa fa-print"></i><strong>F5</strong>Print
                                        </a>
                                        <a class="btn  btn-app">
                                            <i class="fa">&#8369;</i><strong>F6</strong> Tender
                                        </a>
                                        <a class="btn  btn-app" data-toggle="modal" data-target="#salesInvoiceDiscount">
                                            <i class="fa fa-percent"></i><strong>F7</strong>Discount
                                        </a>
                                        <a class="btn  btn-app" data-toggle="modal" data-target="#override">
                                            <i class="fa fa-user-secret"></i><strong>F8</strong> Override
                                        </a>
                                        <a class="btn  btn-app">
                                            <i class="fa fa-reply"></i><strong>F9</strong> Return
                                        </a>
                                        <a class="btn btn-app" href="../Software/PurchaseOrder">
                                            <i class="fa fa-close"></i><strong>F12</strong> Close
                                        </a>
                                    </div><!--btn horizontal-->
                                </section>
                                <div class="col-md-12">
                                    <div class="input-group pull" style="position: absolute; top: 780px; width: 100%;">
                                        <div class="input-group-btn">
                                            <button type="button" class="btn btn-primary"><i class='fa fa-user'></i>F10 &nbsp; SALES</button>
                                        </div><!-- /btn-group -->
                                        <input type='text' ... list='listid' class="form-control">
                                        <datalist id='listid'>
                                            <option label='label1' value='value1'></option>
                                            <option label='label2' value='value2'></option>
                                            ...
                                        </datalist>
                                    </div><!-- /input-group -->
                                </div>
                            </div><!-- ./wrapper -->
                            <!-- ===================Main Footer============================ -->
                            @Html.Partial("_MainFooter")
                        </div>
                        <script type="text/javascript">

                            //================
                            // Global variables
                            // ================
                            var salesCollections;
                            var salesGrid;
                            var editSales;

                            var btnFirstPageGrid5;
                            var btnPreviousPageGrid5;
                            var btnNextPageGrid5;
                            var btnLastPageGrid5;
                            var btnCurrentPageGrid;

                            var periodListResult;

                            // =============================
                            // Get PeriodMasterList Data
                            // =============================

                            // CALLED SECOND
                            function getPeriodMasterList(callback) {
                                // var PeriodList = new wijmo.collections.ObservableArray();
                                $("#loadingModal").modal("show");
                                $.ajax({
                                    url: '/api/item/list',
                                    cache: false,
                                    type: 'GET',
                                    contentType: 'application/json; charset=utf-8',
                                    data: {},
                                    success: function(results) {
                                        callback(results)
                                    }
                                    // function (results) {
                                    //
                                    // }
                                });
                            }

                            // ===================
                            // Period Edit Button
                            // ===================
                            function cmdPeriodEditButton_OnClick() {
                                salesCollections.editSales(salesCollections.currentItem);

                            }

                            // =====================
                            // Period delete Button
                            // =====================
                            function cmdPeriodDeleteButton_OnClick() {
                                var id = salesCollections.currentItem.Id;

                                console.log(typeof id + id);

                                $('#deletePeriodConfirm').modal({
                                    show: true,
                                    backdrop: 'static'
                                });
                                $("#cmdConfirmDeletePeriod").prop("disabled", false);
                                $("#cmdConfirmDeleteCloseButton").prop("disabled", false);
                            }
                            //======================
                            //Pick Modal
                            //======================\
                            function pickItem_onClick() {
                                var id = salesCollections.currentItem.Id;
                                $('#pickItem').modal({
                                    show: true,
                                    backdrop: 'static'
                                });
                            }
                            // =====================
                            // Add Account Button
                            // =====================
                            function cmdaddPeriodButton_OnClick() {
                                $('#addPeriod').modal({
                                    show: true,
                                    backdrop: 'static'
                                });
                            }
                            // Period Confirm Delete Button
                            function cmdPeriodConfirmDeleteButton_OnClick() {
                                $("#cmdConfirmDeletePeriod").prop("disabled", true);
                                $("#cmdConfirmDeleteCloseButton").prop("disabled", true);

                                //====================
                                var id = salesCollections.currentItem.Id;

                                $.ajax({
                                    url: '/api/period/delete/' + id,
                                    type: "DELETE",
                                    contentType: "application/json; charset=utf-8",
                                    dataType: "json",
                                    statusCode: {
                                        200: function () {
                                            $("#cmdConfirmDeletePeriod").prop("disabled", true);
                                            $("#cmdConfirmDeleteCloseButton").prop("disabled", true);
                                            toastr.success("Successfully Deleted");
                                            window.setTimeout(function () {
                                                location.reload()
                                            }, 1000);
                                        },
                                        404: function () {
                                            toastr.error("Request Not Found");
                                            $('#deletePeriodConfirm').modal('hide');
                                            $("#cmdConfirmDeletePeriod").prop("disabled", false);
                                            $("#cmdConfirmDeleteCloseButton").prop("disabled", false);
                                        },
                                        400: function () {
                                            toastr.error("Can't be deleted");
                                            $('#deletePeriodConfirm').modal('hide');
                                            $("#cmdConfirmDeletePeriod").prop("disabled", false);
                                            $("#cmdConfirmDeleteCloseButton").prop("disabled", false);
                                        }
                                    }
                                });
                            }

                            // ==================
                            // Navigation Buttons
                            // ==================
                            function updateNavigateButtonsCollectionPeriod() {
                                if (salesCollections.pageSize <= 0) {
                                    document.getElementById('navigationPageGrid').style.display = 'none';
                                    return;
                                }
                                document.getElementById('navigationPageGrid').style.display = 'block';
                                if (salesCollections.pageIndex === 0) {
                                    btnFirstPageGrid5.setAttribute('disabled', 'disabled');
                                    btnPreviousPageGrid5.setAttribute('disabled', 'disabled');
                                    btnNextPageGrid5.removeAttribute('disabled');
                                    btnLastPageGrid5.removeAttribute('disabled');
                                } else if (salesCollections.pageIndex === (salesCollections.pageCount - 1)) {
                                    btnFirstPageGrid5.removeAttribute('disabled');
                                    btnPreviousPageGrid5.removeAttribute('disabled');
                                    btnLastPageGrid5.setAttribute('disabled', 'disabled');
                                    btnNextPageGrid5.setAttribute('disabled', 'disabled');
                                } else {
                                    btnFirstPageGrid5.removeAttribute('disabled');
                                    btnPreviousPageGrid5.removeAttribute('disabled');
                                    btnNextPageGrid5.removeAttribute('disabled');
                                    btnLastPageGrid5.removeAttribute('disabled');
                                }
                                btnCurrentPageGrid.innerHTML = (salesCollections.pageIndex + 1) + ' / ' + salesCollections.pageCount;

                            }


                            //============
                            // On Page Load
                            // ============

                            // CALLED WHEN MODAL IS CLICKED
                            // CALLED THIRD
                            function initTableSalesList() {
                                var results = periodListResult;
                                var PeriodList = new wijmo.collections.ObservableArray();
                                $("#loadingModal").modal("hide");
                                /* var results = JSON.parse(result); */
                                if (results && results.length > 0) {
                                    for (i = 0; i < results.length; i++) {
                                        PeriodList.push({
                                            BarCode: results[i]["BarCode"],
                                            ItemDescription: results[i]["ItemDescription"],
                                            GenericName: results[i]["GenericName"],
                                            Price: results[i]["Price"],
                                            OnhandQuantity: results[i]["OnhandQuantity"],
                                            IsInventory: results[i]["IsInventory"],
                                            PickId: "<button class='btn btn-primary btn-flat btn-xs btn-block' id='pickButton' onclick='pickItem_onClick()'><i class='fa fa-hand-o-right'></i>Pick</button>",
                                        });
                                    }
                                    salesCollections = new wijmo.collections.CollectionView(PeriodList);
                                    btnCurrentPageGrid.innerHTML = (salesCollections.pageIndex + 1) + ' / ' + salesCollections.pageCount;

                                    salesCollections.canFilter = true;
                                    salesCollections.pageSize = 15;

                                    //Filter
                                    var filterText = '';
                                    $('#InputFilter').keydown(function () {
                                        filterText = this.value.toLowerCase();
                                        salesCollections.refresh();
                                    });
                                    salesCollections.filter = function (period) {
                                        return !filterText || (period.Period.toLowerCase().indexOf(filterText) > -1);
                                    }
                                    salesCollections.collectionChanged.addHandler(function (sender, args) {
                                        updateNavigateButtonsCollectionPeriod();

                                    });
                                    salesCollections.currentChanged.addHandler(function (sender, args) {
                                        updateNavigateButtonsCollectionPeriod();
                                    });


                                    //Flex Grid

                                    salesGrid = new wijmo.grid.FlexGrid('#periodCollectionGrid');
                                    salesGrid.initialize({
                                        columns: [
                                             {
                                                 "header": "Barcode",
                                                 "binding": "BarCode",
                                                 "width": 60,
                                                 "align": "center",
                                                 "isContentHtml": true
                                             },
                                             {
                                                 "header": "Item",
                                                 "binding": "ItemDescription",
                                                 "width": 70,
                                                 "align": "center",
                                                 "isContentHtml": true

                                             },
                                            {
                                                "header": "Generic Name",
                                                "binding": "GenericName",
                                                "align": "center",
                                                "allowSorting": true,
                                                "isContentHtml": true,
                                                "width": "2*"
                                            },
                                            {
                                                "header": "Price",
                                                "binding": "Price",
                                                "align": "center",
                                                "allowSorting": true,
                                                "isContentHtml": true,
                                                "width": "2*"
                                            },
                                             {
                                                 "header": "On Hand Qty",
                                                 "binding": "OnhandQuantity",
                                                 "align": "center",
                                                 "allowSorting": true,
                                                 "isContentHtml": true,
                                                 "width": "2*"
                                             },
                                             {
                                                 "header": "I",
                                                 "binding": "IsInventory",
                                                 "align": "center",
                                                 "allowSorting": true,
                                                 "isContentHtml": true,
                                                 "width": "2*"
                                             },
                                              {
                                                  "header": " ",
                                                  "binding": "PickId",
                                                  "align": "center",
                                                  "allowSorting": true,
                                                  "isContentHtml": true,
                                                  "width": "2*"
                                              }],
                                        autoGenerateColumns: false,
                                        itemsSource: salesCollections,
                                        isReadOnly: true,
                                        autoSizeMode: wijmo.grid.AutoSizeMode.Both,
                                        allowDragging: wijmo.grid.AllowDragging.None,
                                        selectionMode: wijmo.grid.SelectionMode.Row
                                    });


                                    salesGrid.trackChanges = true;

                                    updateNavigateButtonsCollectionPeriod();

                                    btnFirstPageGrid5.addEventListener('click', function () {
                                        salesCollections.moveToFirstPage();
                                        updateNavigateButtonsCollectionPeriod();
                                    });
                                    btnPreviousPageGrid5.addEventListener('click', function () {
                                        salesCollections.moveToPreviousPage();
                                        updateNavigateButtonsCollectionPeriod();
                                    });
                                    btnNextPageGrid5.addEventListener('click', function () {
                                        salesCollections.moveToNextPage();
                                        updateNavigateButtonsCollectionPeriod();
                                    });
                                    btnLastPageGrid5.addEventListener('click', function () {
                                        salesCollections.moveToLastPage();
                                        updateNavigateButtonsCollectionPeriod();
                                    });
                                } else {
                                    /*   alert("No data."); */
                                }
                            }

                            $(document).ready(function () {

                                // Navigation button
                                btnFirstPageGrid5 = document.getElementById('btnMoveToFirstPageGrid');
                                btnPreviousPageGrid5 = document.getElementById('btnMoveToPreviousPageGrid');
                                btnNextPageGrid5 = document.getElementById('btnMoveToNextPageGrid');
                                btnLastPageGrid5 = document.getElementById('btnMoveToLastPageGrid');
                                btnCurrentPageGrid = document.getElementById('btnCurrentPageGrid');

                                //Collection View
                                // CALLED AJAX REEQUEST RETURNED RESULTS WHEN AJAX IS SUCCESS
                                // CALLED FIRST
                                getPeriodMasterList(function(results) {
                                    console.log('--- data ', results)
                                    if (results && results.length > 0) {
                                        periodListResult = results
                                    }
                                });

                            });
                            //modal cancel
                            $('#btnCancel').click(function () {
                                $('#salesItem').modal('toggle');
                            });


                        </script>
</body>
